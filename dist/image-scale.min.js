/*!
 * image-process v0.0.1
 * (c) 2017-2017 dailc
 * Released under the MIT License.
 * https://github.com/dailc/image-process
 */
!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):t.ImageScale=a()}(this,function(){"use strict";function t(t,a,r,i,n,o){for(var e=n/a,h=o/r,f=i,v=0;v<n;v+=1)for(var d=0;d<o;d+=1)!function(i,o){var v=Math.min(a-1,i/e),d=Math.min(r-1,o/h),u=Math.floor(v),c=Math.floor(d),m=o*n+i,g=c*a+u;m*=4,g*=4;for(var M=0;M<=3;M+=1)f[m+M]=t[g+M]}(v,d)}function a(a,r){return t(a.data,a.width,a.height,r.data,r.width,r.height),r}function r(t,a,r,i,n){var o=i,e=n;o>=r?o=r-1:o<0&&(o=0),e>=a?e=a-1:e<0&&(e=0);var h=o*a+e;return h*=4,[t[h+0],t[h+1],t[h+2],t[h+3]]}function i(t,a,i,n,o,e){for(var h=o/a,f=e/i,v=n,d=0;d<o;d+=1)for(var u=0;u<e;u+=1)!function(n,e){var d=Math.min(a-1,n/h),u=Math.min(i-1,e/f),c=Math.floor(d),m=Math.floor(u),g=d-c,M=u-m,l=1-g,w=1-M,s=e*o+n;s*=4;for(var p=r(t,a,i,m+0,c+0),I=r(t,a,i,m+0,c+1),y=r(t,a,i,m+1,c+0),D=r(t,a,i,m+1,c+1),x=0;x<=3;x+=1){var E=M*(l*y[x]+g*D[x]),b=w*(l*p[x]+g*I[x]);v[s+x]=E+b}}(d,u)}function n(t,a){return i(t.data,t.width,t.height,a.data,a.width,a.height),a}function o(t,a,r,i,n,o){for(var e=i,h=n/a,f=o/r,v=0;v<n;v+=1)for(var d=0;d<o;d+=1)!function(i,o){var v=Math.min(a-1,i/h),d=Math.min(r-1,o/f),u=Math.floor(v),c=Math.floor(d),m=v-u,g=d-c,M=o*n+i;M*=4;for(var l=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],w=0;w<=3;w+=1){for(var s=-1;s<=2;s+=1)for(var p=-1;p<=2;p+=1)l[s+1][p+1]=A(t,a,r,c+s,u+p,w);L(l),e[M+w]=C(O(g,m))}}(v,d)}function e(t,a){return o(t.data,t.width,t.height,a.data,a.width,a.height),a}function h(t){var a=t>=0?t:-t,r=t*t,i=a*r;return a<=1?1-(R+3)*r+(R+2)*i:a<=2?-4*R+8*R*a-5*R*r+R*i:0}function f(t){var a=t;return a=Math.min(255,a),a=Math.max(0,a)}function v(t,a,r,i,n){var o=i,e=n;o>=r?o=r-1:o<0&&(o=0),e>=a?e=a-1:e<0&&(e=0);var h=o*a+e;return h*=4,[t[h+0],t[h+1],t[h+2],t[h+3]]}function d(t,a,r,i,n,o){for(var e=i,d=n/a,u=o/r,c=0;c<n;c+=1)for(var m=0;m<o;m+=1)!function(i,o){var c=Math.min(a-1,i/d),m=Math.min(r-1,o/u),g=Math.floor(c),M=Math.floor(m),l=c-g,w=m-M,s=o*n+i;s*=4;for(var p=[0,0,0,0],I=-1;I<=2;I+=1)for(var y=-1;y<=2;y+=1){var D=v(t,a,r,M+I,g+y),x=h(I-w)*h(y-l);p[0]+=D[0]*x,p[1]+=D[1]*x,p[2]+=D[2]*x,p[3]+=D[3]*x}e[s+0]=f(p[0]),e[s+1]=f(p[1]),e[s+2]=f(p[2]),e[s+3]=f(p[3])}(c,m)}function u(t,a){return d(t.data,t.width,t.height,a.data,a.width,a.height),a}function c(t){for(var a=t,r=arguments.length,i=Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return i.forEach(function(t){t&&Object.keys(t).forEach(function(r){a[r]=t[r]})}),a}var m=void 0,g=void 0,M=void 0,l=void 0,w=void 0,s=void 0,p=void 0,I=void 0,y=void 0,D=void 0,x=void 0,E=void 0,b=void 0,j=void 0,T=void 0,k=void 0,A=function(t,a,r,i,n,o){var e=i,h=n;e>=r?e=r-1:e<0&&(e=0),h>=a?h=a-1:h<0&&(h=0);var f=e*a+h;return f*=4,t[f+o]},C=function(t){var a=t;return a=Math.min(255,a),a=Math.max(0,a)},L=function(t){var a=t;m=a[1][1],g=-.5*a[1][0]+.5*a[1][2],M=a[1][0]-2.5*a[1][1]+2*a[1][2]-.5*a[1][3],l=-.5*a[1][0]+1.5*a[1][1]-1.5*a[1][2]+.5*a[1][3],w=-.5*a[0][1]+.5*a[2][1],s=.25*a[0][0]-.25*a[0][2]-.25*a[2][0]+.25*a[2][2],p=-.5*a[0][0]+1.25*a[0][1]-a[0][2]+.25*a[0][3]+.5*a[2][0]-1.25*a[2][1]+a[2][2]-.25*a[2][3],I=.25*a[0][0]-.75*a[0][1]+.75*a[0][2]-.25*a[0][3]-.25*a[2][0]+.75*a[2][1]-.75*a[2][2]+.25*a[2][3],y=a[0][1]-2.5*a[1][1]+2*a[2][1]-.5*a[3][1],D=-.5*a[0][0]+.5*a[0][2]+1.25*a[1][0]-1.25*a[1][2]-a[2][0]+a[2][2]+.25*a[3][0]-.25*a[3][2],x=a[0][0]-2.5*a[0][1]+2*a[0][2]-.5*a[0][3]-2.5*a[1][0]+6.25*a[1][1]-5*a[1][2]+1.25*a[1][3]+2*a[2][0]-5*a[2][1]+4*a[2][2]-a[2][3]-.5*a[3][0]+1.25*a[3][1]-a[3][2]+.25*a[3][3],E=-.5*a[0][0]+1.5*a[0][1]-1.5*a[0][2]+.5*a[0][3]+1.25*a[1][0]-3.75*a[1][1]+3.75*a[1][2]-1.25*a[1][3]-a[2][0]+3*a[2][1]-3*a[2][2]+a[2][3]+.25*a[3][0]-.75*a[3][1]+.75*a[3][2]-.25*a[3][3],b=-.5*a[0][1]+1.5*a[1][1]-1.5*a[2][1]+.5*a[3][1],j=.25*a[0][0]-.25*a[0][2]-.75*a[1][0]+.75*a[1][2]+.75*a[2][0]-.75*a[2][2]-.25*a[3][0]+.25*a[3][2],T=-.5*a[0][0]+1.25*a[0][1]-a[0][2]+.25*a[0][3]+1.5*a[1][0]-3.75*a[1][1]+3*a[1][2]-.75*a[1][3]-1.5*a[2][0]+3.75*a[2][1]-3*a[2][2]+.75*a[2][3]+.5*a[3][0]-1.25*a[3][1]+a[3][2]-.25*a[3][3],k=.25*a[0][0]-.75*a[0][1]+.75*a[0][2]-.25*a[0][3]-.75*a[1][0]+2.25*a[1][1]-2.25*a[1][2]+.75*a[1][3]+.75*a[2][0]-2.25*a[2][1]+2.25*a[2][2]-.75*a[2][3]-.25*a[3][0]+.75*a[3][1]-.75*a[3][2]+.25*a[3][3]},O=function(t,a){var r=t*t,i=a*a,n=i*a;return m+g*a+M*i+l*n+(w+s*a+p*i+I*n)*t+(y+D*a+x*i+E*n)*r+(b+j*a+T*i+k*n)*(r*t)},R=-1,S={width:80,height:80,mime:"image/png",processType:1},U={};return function(t){var r=t;r.scaleImageData=function(t,r,i){(0,[a,n,e,u][c({},S,i).processType])(t,r)},r.scaleImage=function(t,a){var i=t.width,n=t.height,o=c({},S,a),e=document.createElement("canvas"),h=e.getContext("2d");e.width=i,e.height=n,h.drawImage(t,0,0,i,n);var f=h.getImageData(0,0,i,n),v=h.createImageData(o.width,o.height);return r.scaleImageData(f,v,o),e.width=v.width,e.height=v.height,h.putImageData(v,0,0,0,0,e.width,e.height),e.toDataURL(o.mime,.9)}}(U),U});